"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[962],{4239:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(5155);l(2115);var o=l(6766),n=l(7472);function s(e){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"w-full h-full bg-gray-50",style:{position:"relative"},children:(0,a.jsx)(n.GT,{children:(0,a.jsx)(n.WZ,{children:(0,a.jsxs)("div",{onClick:function(t){if(e.disabled)return;let l=t.currentTarget,a=t.nativeEvent.offsetX/l.clientWidth,o=t.nativeEvent.offsetY/l.clientHeight;e.setXCoor(a),e.setYCoor(o)},className:"w-full h-full cursor-crosshair relative",children:[(0,a.jsx)(o.default,{className:"MapPicture w-full h-full select-none",src:"/uw campus map.png",alt:"Campus Map",width:896,height:683,draggable:!1,unoptimized:!0,priority:!0,style:{width:"100%",height:"100%",display:"block",pointerEvents:"auto"},onError:e=>{console.error("Campus map image failed to load",e)}}),null!=e.xCoor&&null!=e.yCoor&&null!=e.xRightCoor&&null!=e.yRightCoor&&(0,a.jsx)("div",{style:(()=>{if(null!=e.xCoor&&null!=e.yCoor&&null!=e.xRightCoor&&null!=e.yRightCoor){let t=document.querySelector(".MapPicture");if(!t)return{};let l=t.clientWidth,a=t.clientHeight,o=e.xCoor*l,n=e.yCoor*a,s=e.xRightCoor*l,i=e.yRightCoor*a,r=Math.sqrt(Math.pow(s-o,2)+Math.pow(i-n,2)),d=180/Math.PI*Math.atan2(i-n,s-o);return{position:"absolute",top:"".concat(n,"px"),left:"".concat(o,"px"),width:"".concat(r,"px"),transform:"rotate(".concat(d,"deg) translate(0, -50%)"),transformOrigin:"0 0",height:"1.5px",backgroundColor:"black"}}return{}})()}),null!=e.xCoor&&null!=e.yCoor&&(0,a.jsx)("div",{style:{top:"".concat(100*e.yCoor,"%"),left:"".concat(100*e.xCoor,"%"),position:"absolute",width:"3px",height:"3px",borderRadius:"50%",backgroundColor:"red",pointerEvents:"none",transform:"translate(-50%, -50%)"},className:"z-10"}),null!=e.xRightCoor&&null!=e.yRightCoor&&(0,a.jsx)("div",{style:{top:"".concat(100*e.yRightCoor,"%"),left:"".concat(100*e.xRightCoor,"%"),position:"absolute",width:"3px",height:"3px",borderRadius:"50%",backgroundColor:"limegreen",pointerEvents:"none",transform:"translate(-50%, -50%)"},className:"z-10"}),e.children]})})})})})}},6962:(e,t,l)=>{l.d(t,{default:()=>r});var a=l(5155),o=l(8999),n=l(2115),s=l(6766),i=l(4239);function r(){let e=(0,o.useRouter)(),[t,l]=(0,n.useState)(!1),[r,d]=(0,n.useState)(""),u="qwertyuiop",c="";c="231",(0,n.useEffect)(()=>{let e="",t=t=>{(e=(e+t.key).slice(-u.length))===u&&l(!0)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]);let[p,h]=(0,n.useState)(null),[x,g]=(0,n.useState)(null),[m,f]=(0,n.useState)(null),[b,y]=(0,n.useState)(null),[v,w]=(0,n.useState)(!1),[C,j]=(0,n.useState)(null),[N,S]=(0,n.useState)(null),[k,R]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(C){R(C);let e=setTimeout(()=>R(null),2500);return()=>clearTimeout(e)}if(N){R(N);let e=setTimeout(()=>R(null),2500);return()=>clearTimeout(e)}},[C,N]);let[E,T]=(0,n.useState)(""),[L,M]=(0,n.useState)(""),[P,W]=(0,n.useState)(""),[z,U]=(0,n.useState)(""),q=async e=>{if(e.preventDefault(),!p||null==m||null==b||!L)return void S("Please fill all fields, select an image, and location on the map.");w(!0),S(null),j(null);try{let e=new FormData;e.append("image",p),e.append("xCoordinate",String(m)),e.append("yCoordinate",String(b)),e.append("name",E),e.append("building",L),e.append("latitude",P),e.append("longitude",z);let a="needs approval",o=!1;t&&r===c&&(a="approved",o=!0),e.append("status",a),(await fetch("api/uploadLocation",{method:"POST",body:e})).ok?(j("Location uploaded successfully!"),o&&(R("Welcome devs!"),setTimeout(()=>R(null),2500)),h(null),g(null),f(null),y(null),T(""),M(""),W(""),U(""),d(""),l(!1)):S("Upload failed.")}catch(e){S("Error uploading location.")}w(!1)};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4",children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 flex flex-col items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Enter Passcode"}),(0,a.jsx)("input",{type:"password",value:r,onChange:e=>d(e.target.value),className:"border rounded px-4 py-2 mb-4 text-lg",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700",onClick:()=>l(!1),children:"Close"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded shadow hover:bg-green-700",onClick:()=>{r===c?(R("Welcome devs!"),setTimeout(()=>R(null),2500),e.push("/manual-dot-placer"),l(!1)):(R("Incorrect passcode"),setTimeout(()=>R(null),2500))},children:"Submit"})]})]})}),(0,a.jsxs)("form",{className:"w-full max-w-lg bg-white rounded-lg shadow-md p-6 flex flex-col gap-4",onSubmit:q,children:[k&&(0,a.jsx)("div",{className:"fixed top-6 right-6 z-50 px-6 py-3 rounded-lg shadow font-bold text-white ".concat(k===C?"bg-green-600":"bg-red-600"),children:k}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-800",children:"Upload Campus Location"}),(0,a.jsx)("label",{className:"block font-medium text-gray-700",children:"Image File"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let l=(null==(t=e.target.files)?void 0:t[0])||null;h(l),j(null),S(null),l?g(URL.createObjectURL(l)):g(null)},className:"mb-2"}),(0,a.jsx)("label",{className:"block font-medium text-gray-700",children:"Building"}),(0,a.jsx)("input",{type:"text",value:L,onChange:e=>M(e.target.value),required:!0,className:"border rounded px-3 py-2 mb-2"}),x&&(0,a.jsx)(s.default,{src:x,alt:"Preview",width:300,height:200,className:"max-w-xs rounded shadow mb-2"}),(0,a.jsx)("div",{className:"flex items-center justify-center w-full",style:{width:"100%",margin:0,padding:0},children:(0,a.jsx)("div",{style:{width:"90vw",maxWidth:1200,aspectRatio:"896/683",position:"relative",background:"#eaeaea",borderRadius:12,overflow:"hidden",margin:0,padding:0},children:(0,a.jsx)(i.A,{xCoor:m,yCoor:b,setXCoor:f,setYCoor:y,xRightCoor:null,yRightCoor:null,aspectRatio:.25})})}),(0,a.jsx)("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700 disabled:opacity-50",children:v?"Uploading...":"Submit Location"}),C&&(0,a.jsx)("div",{className:"text-green-600 font-semibold",children:C}),N&&(0,a.jsx)("div",{className:"text-red-600 font-semibold",children:N})]})]})}}}]);