exports.id=647,exports.ids=[647],exports.modules={88:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,5227,23)),Promise.resolve().then(c.t.bind(c,6346,23)),Promise.resolve().then(c.t.bind(c,7924,23)),Promise.resolve().then(c.t.bind(c,99,23)),Promise.resolve().then(c.t.bind(c,8243,23)),Promise.resolve().then(c.t.bind(c,8827,23)),Promise.resolve().then(c.t.bind(c,2763,23)),Promise.resolve().then(c.t.bind(c,7173,23)),Promise.resolve().then(c.bind(c,5587))},360:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,6133,23)),Promise.resolve().then(c.t.bind(c,6444,23)),Promise.resolve().then(c.t.bind(c,6042,23)),Promise.resolve().then(c.t.bind(c,9477,23)),Promise.resolve().then(c.t.bind(c,9345,23)),Promise.resolve().then(c.t.bind(c,2089,23)),Promise.resolve().then(c.t.bind(c,6577,23)),Promise.resolve().then(c.t.bind(c,1307,23)),Promise.resolve().then(c.t.bind(c,4817,23))},2643:()=>{},2704:()=>{},4826:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(1658);let e=async a=>[{type:"image/png",sizes:"96x96",url:(0,d.fillMetadataSegment)(".",await a.params,"icon1.png")+"?cc877a186aa25314"}]},5258:(a,b,c)=>{"use strict";c.d(b,{default:()=>j});var d=c(687),e=c(3210),f=c(5677),g=c(474),h=c(4568);function i(){let[a,b]=(0,e.useState)([]),[c,f]=(0,e.useState)(null),[i,j]=(0,e.useState)(""),[k,l]=(0,e.useState)({}),m=(0,e.useRef)(null),n=(0,e.useRef)(null);function o(a){if(null===m.current||null===n.current)return;let c=document.getElementById("dot-map-container");if(!c)return;let d=c.getBoundingClientRect(),e=(a.clientX-d.left)/d.width-n.current.x,f=(a.clientY-d.top)/d.height-n.current.y;b(a=>a.map((a,b)=>b===m.current?{...a,x:Math.max(0,Math.min(1,e)),y:Math.max(0,Math.min(1,f))}:a))}function p(){m.current=null,n.current=null,document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",p)}return(0,d.jsxs)("div",{style:{width:"100vw",height:"100vh",background:"#f8f8f8"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",margin:8},children:[(0,d.jsx)("h2",{style:{margin:0,marginRight:16},children:"Manual Building Dot Placer"}),(0,d.jsx)("button",{onClick:function(){let b=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download="manual_building_lookup.json",d.click(),URL.revokeObjectURL(c)},style:{fontSize:16,padding:"8px 16px"},children:"Export JSON"}),(0,d.jsxs)("span",{style:{marginLeft:16,color:"#888"},children:["Dots placed: ",a.length]})]}),(0,d.jsx)("div",{id:"dot-map-container",style:{position:"relative",width:"80vw",height:"80vh",margin:"auto"},children:(0,d.jsx)(h.GT,{children:(0,d.jsx)(h.WZ,{children:(0,d.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},onContextMenu:function(a){a.preventDefault();let b=a.currentTarget.querySelector("img");if(!b)return;let c=b.getBoundingClientRect(),d=(a.clientX-c.left)/c.width,e=(a.clientY-c.top)/c.height;d>=0&&d<=1&&e>=0&&e<=1&&(f({x:d,y:e}),j(""))},children:[(0,d.jsx)(g.default,{src:"/uw campus map.png",alt:"Campus Map",style:{width:"100%",height:"100%",objectFit:"contain",display:"block"}}),a.map((c,f)=>{let[g,h]=(0,e.useState)(!1);return(0,d.jsxs)("div",{style:{position:"absolute",top:`${100*c.y}%`,left:`${100*c.x}%`,width:21,height:21,borderRadius:"50%",background:"yellow",border:"2px solid #888",display:"flex",alignItems:"center",justifyContent:"center",transform:"translate(-50%, -50%)",zIndex:10,fontWeight:"bold",color:"#222",fontSize:12,cursor:"grab",userSelect:"none"},title:c.building,onMouseDown:b=>(function(b,c){b.stopPropagation(),m.current=c;let d=b.currentTarget.parentElement.getBoundingClientRect(),e=(b.clientX-d.left)/d.width,f=(b.clientY-d.top)/d.height;n.current={x:e-a[c].x,y:f-a[c].y},document.addEventListener("mousemove",o),document.addEventListener("mouseup",p)})(b,f),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[c.building,(0,d.jsx)("button",{onClick:a=>{a.stopPropagation(),b(a=>a.filter((a,b)=>b!==f))},style:{position:"absolute",top:-10,right:-10,width:18,height:18,borderRadius:"50%",background:"#f44",color:"#fff",border:"none",fontSize:12,cursor:"pointer",zIndex:20},title:"Delete dot",children:"\xd7"}),g&&k[c.building]&&(0,d.jsx)("div",{style:{position:"absolute",top:"50%",left:"110%",transform:"translateY(-50%)",background:"#fff",border:"1px solid #ccc",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",padding:"6px 12px",minWidth:"60px",zIndex:30,pointerEvents:"auto",whiteSpace:"nowrap"},children:k[c.building].map(a=>(0,d.jsx)("button",{style:{display:"block",width:"100%",margin:"2px 0",padding:"4px 8px",fontSize:"12px",background:"#eee",border:"1px solid #bbb",borderRadius:"4px",cursor:"pointer",textAlign:"left"},onClick:()=>window.open(`/clean_floorplans/${a.filename}`,"_blank"),children:a.floor.replace("FLR","")},a.filename))})]},f)}),c&&(0,d.jsxs)("div",{style:{position:"absolute",top:`${100*c.y}%`,left:`${100*c.x}%`,transform:"translate(-50%, -120%)",zIndex:20,background:"#fff",border:"1px solid #ccc",borderRadius:8,padding:12,boxShadow:"0 2px 8px rgba(0,0,0,0.15)",minWidth:120},children:[(0,d.jsxs)("div",{style:{marginBottom:8},children:[(0,d.jsx)("label",{children:"Building Code: "}),(0,d.jsx)("input",{type:"text",value:i,onChange:a=>j(a.target.value),style:{width:60,fontWeight:"bold"},autoFocus:!0})]}),(0,d.jsx)("button",{onClick:function(){i.trim()&&c&&(b([...a,{x:c.x,y:c.y,building:i.trim()}]),f(null),j(""))},style:{marginRight:8},children:"Save"}),(0,d.jsx)("button",{onClick:()=>f(null),children:"Cancel"})]})]})})})})]})}function j(){let[a,b]=(0,e.useState)(!1),[c,h]=(0,e.useState)("");(0,e.useState)("")[1];let[j,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)(null),[p,q]=(0,e.useState)(null),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)(null),[v,w]=(0,e.useState)(null),[x,y]=(0,e.useState)(null),[z,A]=(0,e.useState)(""),[B,C]=(0,e.useState)(""),[D,E]=(0,e.useState)(""),[F,G]=(0,e.useState)(""),H=async d=>{if(d.preventDefault(),!j||null==n||null==p||!B)return void w("Please fill all fields, select an image, and location on the map.");s(!0),w(null),u(null);try{let d=new FormData;d.append("image",j),d.append("xCoordinate",String(n)),d.append("yCoordinate",String(p)),d.append("name",z),d.append("building",B),d.append("latitude",D),d.append("longitude",F);let e="needs approval",f=!1;a&&""===c&&(e="approved",f=!0),d.append("status",e),(await fetch("api/uploadLocation",{method:"POST",body:d})).ok?(u("Location uploaded successfully!"),f&&(y("Welcome devs!"),setTimeout(()=>y(null),2500)),k(null),m(null),o(null),q(null),A(""),C(""),E(""),G(""),h(""),b(!1)):w("Upload failed.")}catch{w("Error uploading location.")}s(!1)};return(0,d.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4",children:[a&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 flex flex-col items-center",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Enter Passcode"}),(0,d.jsx)("input",{type:"password",value:c,onChange:a=>h(a.target.value),className:"border rounded px-4 py-2 mb-4 text-lg",autoFocus:!0}),(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700",onClick:()=>b(!1),children:"Close"}),(0,d.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded shadow hover:bg-green-700",onClick:()=>{""===c?(y("Welcome devs!"),setTimeout(()=>y(null),2500),b(!1)):(y("Incorrect passcode"),setTimeout(()=>y(null),2500))},children:"Submit"})]})]})}),(0,d.jsxs)("form",{className:"w-full max-w-lg bg-white rounded-lg shadow-md p-6 flex flex-col gap-4",onSubmit:H,children:[x&&(0,d.jsx)("div",{className:`fixed top-6 right-6 z-50 px-6 py-3 rounded-lg shadow font-bold text-white ${x===t?"bg-green-600":"bg-red-600"}`,children:x}),(0,d.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-800",children:"Upload Campus Location"}),(0,d.jsx)("label",{className:"block font-medium text-gray-700",children:"Image File"}),(0,d.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0]||null;k(b),u(null),w(null),b?m(URL.createObjectURL(b)):m(null)},className:"mb-2"}),(0,d.jsx)("label",{className:"block font-medium text-gray-700",children:"Building"}),(0,d.jsx)("input",{type:"text",value:B,onChange:a=>C(a.target.value),required:!0,className:"border rounded px-3 py-2 mb-2"}),l&&(0,d.jsx)(g.default,{src:l,alt:"Preview",className:"max-w-xs rounded shadow mb-2",layout:"responsive",width:896,height:683}),(0,d.jsx)("div",{className:"flex items-center justify-center w-full",style:{width:"100%",margin:0,padding:0},children:(0,d.jsx)("div",{style:{width:"90vw",maxWidth:1200,aspectRatio:"896/683",position:"relative",background:"#eaeaea",borderRadius:12,overflow:"hidden",margin:0,padding:0},children:(0,d.jsx)(f.A,{xCoor:n,yCoor:p,setXCoor:o,setYCoor:q,xRightCoor:null,yRightCoor:null,aspectRatio:.25})})}),(0,d.jsx)("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700 disabled:opacity-50",children:r?"Uploading...":"Submit Location"}),t&&(0,d.jsx)("div",{className:"text-green-600 font-semibold",children:t}),v&&(0,d.jsx)("div",{className:"text-red-600 font-semibold",children:v})]}),""===c&&!a&&(0,d.jsx)("div",{style:{width:"100%",maxWidth:1e3,margin:"32px auto 0 auto"},children:(0,d.jsx)(i,{})})]})}},5677:(a,b,c)=>{"use strict";c.d(b,{A:()=>g});var d=c(687),e=c(3210),f=c(4568);function g(a){let b=(0,e.useRef)(null),c=(0,e.useRef)(0),g=(0,e.useRef)(0),h=(0,e.useRef)(1);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"w-full h-full bg-gray-50",style:{position:"relative"},children:(0,d.jsx)(f.GT,{onPanningStop:function(a){c.current=-a.state.positionX,g.current=-a.state.positionY,h.current=a.state.scale},onZoomStop:function(a){c.current=-a.state.positionX,g.current=-a.state.positionY,h.current=a.state.scale},children:(0,d.jsx)(f.WZ,{children:(0,d.jsxs)("div",{onClick:function(b){if(a.disabled)return;let c=b.currentTarget,d=b.nativeEvent.offsetX/c.clientWidth,e=b.nativeEvent.offsetY/c.clientHeight;a.setXCoor(d),a.setYCoor(e)},className:"w-full h-full cursor-crosshair relative",children:[(0,d.jsx)("img",{ref:b,className:"MapPicture w-full h-full select-none",src:"/uw campus map.png",alt:"Campus Map",draggable:!1,style:{width:"100%",height:"100%",objectFit:"cover",display:"block",pointerEvents:"auto"}}),null!=a.xCoor&&null!=a.yCoor&&null!=a.xRightCoor&&null!=a.yRightCoor&&(0,d.jsx)("div",{style:(()=>{if(null!=a.xCoor&&null!=a.yCoor&&null!=a.xRightCoor&&null!=a.yRightCoor){let b=document.querySelector(".MapPicture");if(!b)return{};let c=b.clientWidth,d=b.clientHeight,e=a.xCoor*c,f=a.yCoor*d,g=a.xRightCoor*c,h=a.yRightCoor*d,i=Math.sqrt(Math.pow(g-e,2)+Math.pow(h-f,2)),j=180/Math.PI*Math.atan2(h-f,g-e);return{position:"absolute",top:`${f}px`,left:`${e}px`,width:`${i}px`,transform:`rotate(${j}deg) translate(0, -50%)`,transformOrigin:"0 0",height:"1.5px",backgroundColor:"black"}}return{}})()}),null!=a.xCoor&&null!=a.yCoor&&(0,d.jsx)("div",{style:{top:`${100*a.yCoor}%`,left:`${100*a.xCoor}%`,position:"absolute",width:"3px",height:"3px",borderRadius:"50%",backgroundColor:"red",pointerEvents:"none",transform:"translate(-50%, -50%)"},className:"z-10"}),null!=a.xRightCoor&&null!=a.yRightCoor&&(0,d.jsx)("div",{style:{top:`${100*a.yRightCoor}%`,left:`${100*a.xRightCoor}%`,position:"absolute",width:"3px",height:"3px",borderRadius:"50%",backgroundColor:"limegreen",pointerEvents:"none",transform:"translate(-50%, -50%)"},className:"z-10"}),a.children]})})})})})}},6055:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(1658);let e=async a=>[{type:"image/x-icon",sizes:"48x48",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},7667:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(1658);let e=async a=>[{type:"image/png",sizes:"180x180",url:(0,d.fillMetadataSegment)(".",await a.params,"apple-icon.png")+"?748a62ccaa12d7a4"}]},8014:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j,metadata:()=>i});var d=c(7413),e=c(6389),f=c.n(e),g=c(1189),h=c.n(g);c(2704);let i={title:"UW Guesser",description:"A game for guessing locations at the University of Waterloo"};function j({children:a}){return(0,d.jsxs)("html",{lang:"en",children:[(0,d.jsx)("head",{children:(0,d.jsx)("meta",{name:"apple-mobile-web-app-title",content:"UW Guesser"})}),(0,d.jsx)("body",{className:`${f().variable} ${h().variable} antialiased`,children:a})]})}},8299:()=>{},9444:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(1658);let e=async a=>[{type:"image/svg+xml",sizes:"any",url:(0,d.fillMetadataSegment)(".",await a.params,"icon0.svg")+"?ff88400afb3f004b"}]}};